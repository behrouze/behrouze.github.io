{
    "componentChunkName": "component---src-templates-wp-post-tsx",
    "path": "/git",
    "result": {"pageContext":{"id":"a339478b-7f3d-5981-b614-9ce86f788c73","fileAbsolutePath":"/Users/behrouze/Sources/gatsby-blog/obsidian/Blog/git.md","frontmatter":{"categories":["devops"],"date":"2018-05-28","lastUpdate":"2022-01-25","tags":["devops","git"],"title":"Git"},"html":"<p><a href=\"https://git-scm.com\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; box-shadow: 3px 5px 4px rgba(0,0,0,.1);margin:1rem;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.78403755868545%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACTklEQVQoz0WSTUgUYRzG/2tZURjhJaVDJGs3MXfmfWdmt/3wW/xo552PdXdnDXapMCQlzwmC0KVjtzBCEOpQRB9iURFdCg8hdpIgpDIWm5n3n1Z+oPbGRNHhuf6e3wMP3G9u2COEBzuna4GbyiPUpQ3XUut3bAXedTRUAgDY4WMhFSAkBpIgSq3wq9gOXwqtNWjQLddUIx9LPUc8p7ljy0kAiMFu+HSur4rb2jTPRMdQlxZRl1Y9S63fsCgs9kT2iokSiEoA347GvGxc+3q27aSbTzbyXOLSSrErjAa9hyZdcG3tFCyMX96HJn2B6Yjglnq9PDpQg7okUJc2A+i2kwBxGABNZQpN+gpNZQ4t5Y2fSxTRoGt+oWUUmbyEBl3m2fgIoEnnAtifMPm976TG/VxCRya/RF3aci217sHMTAUy+aefifZyg0ygqbzePdMAyOTvnpNKoUFuckubXMtEAdAgT/4DyTy3tVk06SQa5CEyed3LxsM/0k2ABr2BprLMbe25n4kp4mIKkJF1f6C1HRkJJj+d3hQhEE0Hg6a7/yb7+WTnX1vfzafqNpwkfB7JHUBG3qJBymjQZ9xSL/BcPB1Yc1u9yjOxQWTyN94fmwZRagORrAHUpceoy2Vk8hwyUnad1IntbBTEtWFwneZaNOkSt7Uxbip3kMnCL7QQV5eqPYPUCrUaVkrdR8uFliqY72ysEOfbQXTVB9BZZGQ1MNvsj8KHvkilGNahXOw6xC1lEi3lFlrqbW6pV0RHGHaDG2UUmDq+PySG0iCGeuE3wawvdpxXNyEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/b1951d0e69a8147b5f19d2d37cd088d2/bc663/git-300x125.webp 213w,\n/static/b1951d0e69a8147b5f19d2d37cd088d2/c85cb/git-300x125.webp 300w\"\n              sizes=\"(max-width: 300px) 100vw, 300px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/b1951d0e69a8147b5f19d2d37cd088d2/3cb16/git-300x125.png 213w,\n/static/b1951d0e69a8147b5f19d2d37cd088d2/5a46d/git-300x125.png 300w\"\n            sizes=\"(max-width: 300px) 100vw, 300px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/b1951d0e69a8147b5f19d2d37cd088d2/5a46d/git-300x125.png\"\n            alt=\"git scm logo|100\"\n            title=\"git scm logo|100\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></a> <strong>git</strong> est un <strong>système de gestion de version</strong> collaboratif qui permet de garder un historique des modifications effectuées sur un ensemble de fichiers à l'instar de TFS de Microsoft. L'une des particularités de Git est qu'il est possible de travailler en local en bénéficiant de la navigation à travers l'historique de nos fichiers.</p>\n<h2>Initialisation local</h2>\n<p>Lorsqu'on veut qu'une arborescence puisse être gérée par le système Git, il faut <strong>initialiser le dossier \"racine\"</strong> c'est à dire que l'on crée un <strong>repository</strong> avec la commande <strong>git init.</strong> Pour cela on se positionne dans le dossier en question puis exécuter la commande : git init .</p>\n<p>Cela va créer un dossier .git (caché) qui contient toutes les informations concernant le nouveau git repository.</p>\n<h2>Connexion au git server</h2>\n<p>Pour pouvoir travailler sur un repo distant il suffit :</p>\n<ol>\n<li>d'avoir un compte sur le <strong>site</strong> (Github, bitbucket etc.) ou <strong>serveur git distant</strong> (git server est disponible sur Linux mais aussi sur les NAS synology par ex)</li>\n<li>d'avoir un repository créé sur le serveur</li>\n<li>de disposer de l'URI de ce repo distant et des droits suffisant pour se connecter à distance sur le serveur</li>\n</ol>\n<p>git remote add nom_de_notre_connexion uri</p>\n<h2>Utilisation de base</h2>\n<p><code class=\"language-text\">git status</code>  : indique l'<strong>état</strong> de notre répo local ainsi que la <strong>branche</strong> sur la quelle nous travaillons. Il est intéressant de l'utiliser constamment pour voir où on en est dans le workflow</p>\n<p><code class=\"language-text\">git log</code>  : donne l'<strong>historique</strong> des opérations (se positionner dans un répertoire déjà initialisé) git log --oneline  fourni un listing condensé.</p>\n<p><code class=\"language-text\">git log -p</code> :  donne l'<strong>historique</strong> + liste des fichiers modifiés dans chaque commit &#x26; diff</p>\n<p><code class=\"language-text\">git add -A</code>  : ajoute tous les fichiers modifiés listés dans la commande <strong>git status</strong> en zone de <strong>Staging</strong>. Cet ajout est local, et devra être suivi d'un git commit</p>\n<p><code class=\"language-text\">git commit -m \"message_de_commit\"</code>  : sauvegarde en local toutes les modifications présentes dans la zone de staging et y associe un message (ne pas négliger ce message)</p>\n<p><code class=\"language-text\">git commit --amend</code>  : permet d'ajouter des fichiers ou de modifier le message associé au dernier commit</p>\n<p><code class=\"language-text\">git commit --no-verify</code>  : permet de bypasser les checks de pre-commit déclenchés par les hooks</p>\n<p><code class=\"language-text\">git push</code>  : envoi sur le serveur git les modifications qui ont été commité en local. Attention pour que cette commande fonctionne, un repo distant doit avoir été préalablement ajouté (souvent nomé <em>origin</em>)</p>\n<p><code class=\"language-text\">git pull</code>  : récupère les modifications coté serveur (fichiers modifiés ou ajoutés). Cette commande est équivalent à un <strong>git fetch</strong> (récupère les fichiers distants) puis un <strong>git merge</strong> (ajouter les fichiers distant ajouté à notre branche)</p>\n<p><code class=\"language-text\">git rebase -i HEAD~10</code> : permet de <a href=\"https://git-scm.com/book/fr/v1/Utilitaires-Git-R%C3%A9%C3%A9crire-l-historique#Modifier-plusieurs-messages-de-validation\">nettoyer un historique</a> (ici les 10 derniers) de commits dégueux pas encore pushés en utilisant 'f' fixup pour fondre les commits  (<a href=\"http://www.siliconfidential.com/articles/15-seconds-to-cleaner-git-history/\">credit</a> et <a href=\"https://github.com/mockito/mockito/wiki/Using-git-to-prepare-your-PR-to-have-a-clean-history\">aussi</a>), voir aussi git rebase  <a href=\"https://git-scm.com/book/fr/v2/Les-branches-avec-Git-Rebaser-Rebasing\">ici</a></p>\n<p><code class=\"language-text\">git mv &lt;source> &lt;destination></code> : commande souvent méconnue, permet de renommer un dossier/fichier sans perdre son historique (ce qui est le cas si on effectue la manip autrement)</p>\n<h2>Git Branch</h2>\n<p>Les <a href=\"https://git-scm.com/book/fr/v2/Les-branches-avec-Git-Les-branches-en-bref\">branches</a> permettent de <strong>travailler de façon isolée sur une \"copie\"</strong> de l'ensemble du code du répo et il est alors possible de simplement passer d'une branche à l'autre avec des <strong>git checkout</strong>. C'est utile par exemple lorsqu'on veut implémenter une nouvelle fonctionnalité ou corriger un bug sans affecter le code existant. Pour info, la branche créée à l'initialisation du repo s'appelle \"<strong>master</strong>\".</p>\n<p><code class=\"language-text\">git branch ma-nouvelle-branche</code>  : <strong>création</strong> d'une nouvelle branche nommée \"ma-nouvelle-branche\"</p>\n<p><code class=\"language-text\">git branch</code>  : <strong>liste</strong> les branches ainsi que celle qui est sélectionnée</p>\n<p><code class=\"language-text\">git checkout ma-nouvelle-branche</code>  : permet de <strong>se positionner</strong> sur la branche \"<em>ma-nouvelle-branche</em>\"</p>\n<p><code class=\"language-text\">git checkout -</code>  : se <strong>positionner</strong> sur la branche précédente, permet de jongler entre 2 branches</p>\n<p><code class=\"language-text\">git checkout -b ma-nouvelle-branche</code>  : permet de <strong>créer une nouvelle branche</strong> <em>ma-nouvelle-branche</em> <strong>et se</strong> <strong>positionner</strong> dessus</p>\n<p><code class=\"language-text\">git merge ma-nouvelle-branche</code>  : merge les commits de la branche  ma-nouvelle-branche sur la branche courante (se positionner sur Master pour redescendre ses devs)</p>\n<h2>Workflow</h2>\n<p>Le <strong>workflow git de base</strong> est donc le suivant (en répétant les étapes suivantes 1 et 2) :</p>\n<ol>\n<li><code class=\"language-text\">git checkout -b ma-nouvelle-branche</code></li>\n<li>...travailler sur des fichiers</li>\n<li><code class=\"language-text\">git add .</code></li>\n<li><code class=\"language-text\">git commit -m \"msg\"</code></li>\n<li><code class=\"language-text\">git push</code></li>\n</ol>\n<p>On a ainsi une branche <em>ma-nouvelle-branche</em> qui contiendra des modifications qu'il faudra <code class=\"language-text\">rebase</code> ou <code class=\"language-text\">merge</code> sur la <code class=\"language-text\">master</code> (ou <code class=\"language-text\">main</code> qui est la branche de référence, clean).</p>\n<p>Il existe des <strong>workflow git</strong> répendus utilisés sur les projets de grande envergure, faisant collaborer de nombreux développeurs :</p>\n<ul>\n<li><a href=\"https://guides.github.com/introduction/flow/\">GitHub flow</a></li>\n<li><a href=\"https://fr.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow\">Gitflow</a> (<a href=\"https://medium.com/@OVHUXLabs/la-puissance-des-workflows-git-12e195cafe44\">article</a>).</li>\n</ul>\n<h2>Git config</h2>\n<p>Git comporte <strong>3 niveaux de configuration</strong>, que l'on peut modifier avec la commande <a href=\"https://git-scm.com/docs/git-config.html\">git config</a> (<code class=\"language-text\">git config --system|global|local</code>):</p>\n<ol>\n<li><code class=\"language-text\">--system</code>  : appliquée à <strong>tous les utilisateurs du système</strong>, ainsi qu'à tous leurs repos</li>\n</ol>\n<p>modifie <code class=\"language-text\">/etc/gitconfig</code></p>\n<ol>\n<li><code class=\"language-text\">--global</code> : appliquée à <strong>1 utilisateur</strong> ainsi qu'à tous ses repos,</li>\n</ol>\n<p>modifie <code class=\"language-text\">~/.gitconfig</code> ou <code class=\"language-text\">~/.config/git/config</code></p>\n<ol>\n<li><code class=\"language-text\">--local</code> : appliquée <strong>au répository</strong></li>\n</ol>\n<p>modifie le repo courant avec <code class=\"language-text\">.git/config</code></p>\n<p>Attention en cas de redéfinition de clés de config voici la priorité (la plus spécifique gagne):\n<strong>local > global > system</strong></p>\n<h3>Exemples</h3>\n<p><strong>configuration</strong> niveau utilisateur de l'éditeur utilisé dans les commandes git interactives :\n<code class=\"language-text\">git config --global core.editor vi</code></p>\n<p>pour <strong>lister</strong> la config locale :  \n<code class=\"language-text\">git config --local -l</code></p>\n<p>pour supprimer une clé (ici <code class=\"language-text\">pull.rebase</code>) :\n<code class=\"language-text\">git config --global --unset pull.rebase</code></p>\n<h2>Git et SSH sous Windows</h2>\n<p>Sous Windows <strong>faire attention au format de clés SSH</strong> (qu'il suffit de tester en essayant de se connecter avec le compte dédié au serveur git sur ce seveur, s'il l'autorise), à défaut utiliser PuTTY Key Generator pour <strong>convertir la clé privée</strong>:</p>\n<p><img src=\"2019-02-12-22_22_11-PuTTY-Key-Generator.png\" alt=\"PuTTY-Key-Generator\"></p>\n<p>Il est ensuite préférable d’utiliser un <strong>fichier de config SSH</strong> (qui va associer une clé donnée à un serveur), ce fichier a créer s'il n'existe pas : <code class=\"language-text\">%USERPROFILE%\\.ssh\\config</code>  va contenir un ensemble de blocs</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">Host monserveurgit\nHostname adresse.dsn.de.mon.server.git.com\nIdentityFile ~/.ssh/ed25519.ppk\nIdentitiesOnly <span class=\"token function\">yes</span></code></pre></div>\n<h2>Outils</h2>\n<ul>\n<li>Windows: <code class=\"language-text\">choco install git</code>  ou <a href=\"https://gitforwindows.org\">git SCM</a></li>\n<li>Linux: <code class=\"language-text\">sudo apt install git-core -y</code></li>\n<li>Outils graphiques : <a href=\"https://www.gitkraken.com/download\">Git Kraken</a> (multiplateforme) et le tout nouveau <a href=\"https://www.sublimemerge.com/\">Sublime Merge</a></li>\n</ul>\n<h2>Liens</h2>\n<ul>\n<li>la <a href=\"https://git-scm.com/book/fr/v2\">doc git en Francais</a></li>\n<li><a href=\"https://try.github.io/\">ressources officiels</a> et <a href=\"https://services.github.com/on-demand/downloads/fr/github-git-cheat-sheet/\">aide mémoire git</a></li>\n<li><a href=\"https://sogilis.com/blog/demystifying-git-concepts\">demystifying git concepts</a></li>\n<li><a href=\"https://www.atlassian.com/git/tutorials\">Atlassian</a></li>\n<li><a href=\"https://fr.wikipedia.org/wiki/Markdown\">syntaxe Markdown</a> pour les fichiers README</li>\n<li><a href=\"https://www.numerama.com/tech/382397-gitlab-bitbucket-source-forge-notre-selection-de-trois-alternatives-a-github.html\">comparatif</a> des fournisseurs de service GIT</li>\n</ul>"}},
    "staticQueryHashes": ["1026020893","28434099","3153813225"]}