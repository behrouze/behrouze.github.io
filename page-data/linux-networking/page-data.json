{"componentChunkName":"component---src-templates-wp-post-tsx","path":"/linux-networking","result":{"pageContext":{"id":"8723371b-ae12-5302-832c-2c4953f2c52f","fileAbsolutePath":"/home/behrouze/Sources/blog/obsidian/Blog/linux-networking.md","frontmatter":{"categories":["linux"],"date":"2017-07-14","lastUpdate":null,"tags":["admin-linux","linux","reseau","securite","tutoriel"],"title":"Linux Networking"},"html":"<p>Linux dispose depuis longtemps d'outils puissant en ligne de commande pour <strong>diagnostiquer les problèmes réseau</strong> ou <strong>récupérer des informations</strong> sur les éléments présent sur le réseau, comme <code class=\"language-text\">nmap</code>, <code class=\"language-text\">whois</code>, <code class=\"language-text\">dig</code> etc.</p>\n<h2>Netstat</h2>\n<p><code class=\"language-text\">netstat</code> est une commande shell qui affiche les informations sur les connexions réseau locales, les tables de routage et un certain nombre de statistiques:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> <span class=\"token function\">netstat</span> -tupln</code></pre></div>\n<h2>nmap</h2>\n<p>stealthy (furtif) ou SYN scan (known as a stealthy port scan because it does not finish the full TCP handshake) est plus rapide car ne renvois pas de réponse, mais le SYN/ACK de retour de la cible est parfois filtrée par les firewalls... pour scanner les 65.535 ports (juste 1000 par défaut) utiliser <code class=\"language-text\">-p</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">## Port scan</span>\nnmap -sS -p- <span class=\"token operator\">&lt;</span>host<span class=\"token operator\">></span>\n\n<span class=\"token comment\">## Service scan</span>\nnmap -sS -sV -O <span class=\"token operator\">&lt;</span>host<span class=\"token operator\">></span>\n<span class=\"token comment\"># -sV: service scan</span>\n<span class=\"token comment\"># -O: OS detection</span>\n\n<span class=\"token comment\">## Scan UDP</span>\nnmap -sU <span class=\"token operator\">&lt;</span>host<span class=\"token operator\">></span>\n</code></pre></div>\n<h4>Scan Users SMB avec script</h4>\n<p>le <a href=\"https://svn.nmap.org/nmap/scripts/smb-enum-users.nse\">script nmap <strong>smb-enum-users</strong></a> permet de scanner un système pour trouver les utilisateurs SMB</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">nmap --script smb-enum-users.nse -p445 <span class=\"token operator\">&lt;</span>host<span class=\"token operator\">></span>\nnmap -sU -sS --script smb-enum-users.nse -p U:137,T:139 <span class=\"token operator\">&lt;</span>host<span class=\"token operator\">></span></code></pre></div>\n<h2>Autres commandes</h2>\n<h3>Whois</h3>\n<p>La commande <code class=\"language-text\">whois</code> fourni les <strong>infos administratives d'enregistrement</strong> d'un Domaine, par exemple les infos à propos du <strong>propriétaire</strong> (si non obfusqués), les <strong>dates</strong> d'enregistrements et d'expirations du nom de domaine etc...</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">whois behrouze.com</code></pre></div>\n<h3>Dig (Domain Information Groper)</h3>\n<p>Permet de récupérer des infos à propos des <strong>enregistrements DNS d'un domaine</strong>.\nInstaller via <code class=\"language-text\">apt install -y dnsutils</code>  qui installe également <code class=\"language-text\">nslookup</code> et <code class=\"language-text\">nsupdate</code>. Les informations qu'il est possible de recueillir avec <code class=\"language-text\">dig</code> sont:</p>\n<ul>\n<li><strong>résolution de nom</strong> en <strong>adresse IP</strong>, la commande basique <strong>+short</strong> filtre les commentaires dans la réponse, retourne l'adresse IP du (sous) domaine: <code class=\"language-text\">dig behrouze.com +short</code></li>\n<li><strong>récupérer les nom des DNS</strong> ainsi que les principales entrées concernant un domaine:\n<code class=\"language-text\">dig behrouze.com any</code></li>\n<li><strong>interroger</strong> directement <strong>l'un des DNS</strong> listés:\n<code class=\"language-text\">dig @ns-234-a.gandi.net behrouze.com</code></li>\n</ul>"}},"staticQueryHashes":["1026020893","28434099","3153813225"]}