{
    "componentChunkName": "component---src-templates-wp-post-tsx",
    "path": "/apt",
    "result": {"pageContext":{"id":"8a3403da-1bc3-5a6e-a51d-7efacb9c2124","fileAbsolutePath":"/home/behrouze/Sources/gatsby-blog/obsidian/Blog/apt.md","frontmatter":{"categories":["devops"],"date":"2019-08-18","lastUpdate":null,"tags":["bash","linux","raspberry-pi","shell","ubuntu","apt","cli"],"title":"APT"},"html":"<p><em><a href=\"https://web.archive.org/web/20200923133925/https://debian-handbook.info/browse/fr-FR/stable/sect.apt-get.html\">apt</a></em> l’<em><strong>A</strong>dvanced <strong>P</strong>ackaging <strong>T</strong>ool</em> (<em>outil de paquetage avancé</em>) est un outil en <strong>CLI</strong> présent sur les systèmes à base de Linux Debian (Ubuntu, Raspbian, Kali etc.) qui permet de chercher, d’installer ou de mettre à jour des programmes/applications packagés (fichiers archives ou <a href=\"https://web.archive.org/web/20200923133925/https://www.debian.org/doc/manuals/debian-reference/ch02.fr.html\">packages .deb</a>) sur nos systèmes d’exploitations.</p>\n<h1>apt et apt-get</h1>\n<p><code class=\"language-text\">apt</code> succède à <a href=\"https://debian-handbook.info/browse/fr-FR/stable/sect.manipulating-packages-with-dpkg.html\">dpkg</a> qui est de plus bas niveau et sur lequel il repose, <code class=\"language-text\">apt</code> <em>gère les dépendances</em> (installe par exemple les pré-requis).</p>\n<h1>apt-get pour le scripting</h1>\n<p>Les <strong>scripts</strong> shell devraient <strong>plutôt</strong> utiliser <code class=\"language-text\">apt-get</code> qu’<code class=\"language-text\">apt</code> pour éviter de rencontrer des erreurs dues au formatage de la sortie d’<code class=\"language-text\">apt</code> (<a href=\"https://askubuntu.com/questions/990823/apt-gives-unstable-cli-interface-warning\">voir ce SO</a>), car en effet <code class=\"language-text\">apt</code> a été conçu pour apporter des informations plus claires à l’utilisateur en mode interactif (ex. barre d’avancement).<br>\nCela nous est signalé par le message suivant si on utilise <code class=\"language-text\">apt</code> au lieu d’<code class=\"language-text\">apt-get</code> dans nos <strong>scripts</strong>:<br>\n<code class=\"language-text\">WARNING : apt does not have a stable CLI interface. Use with caution in scripts</code></p>\n<h1>Sources.list</h1>\n<p><code class=\"language-text\">apt</code> se base sur des fichiers <a href=\"https://wiki.debian.org/fr/SourcesList\"><code class=\"language-text\">sources.list</code></a> pour savoir où se trouvent les dépôts (repositories) de paquets sur internet concernant la version de notre distribution Linux et il est possible d’ajouter d’autres listes dans <code class=\"language-text\">/etc/apt/sources.list.d/</code>.</p>\n<p>Pour aller plus loin à propos des fichiers <code class=\"language-text\">sources.list</code> lire ce très <a href=\"https://debian-facile.org/doc:systeme:apt:sources.list\">bon article de debian-facile</a>.</p>\n<h1>Commandes apt</h1>\n<p>Les commandes suivantes nécessitent des privilèges élevés <code class=\"language-text\">sudo</code></p>\n<h2>Listing et infos</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">apt</span> list --installed        <span class=\"token comment\"># liste les packages installés</span>\n<span class=\"token function\">apt</span> search nom-package\n<span class=\"token function\">apt</span> show nom-package\n\ndpkg -L nom-package         <span class=\"token comment\"># peut apporter plus d'infos qu'apt show</span></code></pre></div>\n<h2>Installer/desinstaller</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">apt</span> <span class=\"token function\">install</span> nom-package1 nom-package2\n<span class=\"token function\">apt</span> <span class=\"token function\">install</span> -t jessie-backports nom-package   <span class=\"token comment\"># install d'une ancienne version (backport)</span>\n<span class=\"token function\">apt</span> <span class=\"token function\">install</span> /xxx/Téléchargements/nom-package.deb\n\n<span class=\"token function\">apt</span> remove nom-package <span class=\"token comment\"># supprime juste les binaires</span>\n<span class=\"token function\">apt</span> purge nom-package <span class=\"token comment\"># supprime les binaires ET fichiers conf</span></code></pre></div>\n<h2>Gestion des dépôts et maintenance</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">## gestion des dépôts</span>\n<span class=\"token function\">apt</span> update              <span class=\"token comment\"># cherche les MAJ</span>\n<span class=\"token function\">apt</span> list --upgradable   <span class=\"token comment\"># liste ce qu'un upgrade mettrait à jour</span>\n<span class=\"token function\">apt</span> upgrade             <span class=\"token comment\"># installe les MAJ dispo</span>\n<span class=\"token function\">apt</span> full-upgrade        <span class=\"token comment\"># upgrade avec gestion des conflicts</span>\n\n<span class=\"token function\">apt</span> edit-sources\n<span class=\"token function\">apt</span> edit-sources depot-specifique.list <span class=\"token comment\"># situé dans /etc/apt/sources.list.d/```</span>\n\n<span class=\"token comment\">## maintenance</span>\n```shell\n<span class=\"token function\">apt</span> clean <span class=\"token comment\"># supprime les packages et les scripts d'install de /var/cache/apt/archives/</span>\n<span class=\"token function\">apt</span> autoremove  <span class=\"token comment\"># supprime les dépendances inutiles</span>\n<span class=\"token function\">apt</span> --purge autoremove <span class=\"token comment\"># idem avec les fichiers de conf</span></code></pre></div>\n<h1>Astuce</h1>\n<p>Pour déterminer la date d’installation d’un package via APT il faut <a href=\"https://askubuntu.com/questions/73180/how-to-see-packages-installed-on-a-given-date-using-aptitude\">passer par la date</a> des fichiers situés sous <code class=\"language-text\">/var/lib/dpkg/info/</code>.</p>\n<h1>Liens</h1>\n<p>Bon article sur le Stack Exchange <a href=\"askubuntu.com\">Asku Ubuntu</a> sur ce sujet :\n<a href=\"https://askubuntu.com/questions/187888/what-is-the-correct-way-to-completely-remove-an-application\">What is the correct way to completely remove an application?</a></p>"}},
    "staticQueryHashes": ["1026020893","28434099","3153813225"]}