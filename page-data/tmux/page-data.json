{
    "componentChunkName": "component---src-templates-wp-post-tsx",
    "path": "/tmux",
    "result": {"pageContext":{"id":"cbe707a2-c80f-588b-aa8d-5776f65ff4c4","fileAbsolutePath":"/home/behrouze/Sources/blog/obsidian/Blog/tmux.md","frontmatter":{"categories":["devops"],"date":"2020-07-11","lastUpdate":null,"tags":["linux","memo","shell","tips","terminal","tmux"],"title":"Tmux"},"html":"<p><code class=\"language-text\">tmux</code> comme <a href=\"https://doc.ubuntu-fr.org/screen\">Screen</a> sont des <strong>multiplexeur de terminaux</strong>, ils permettent d’exploiter plusieurs terminaux sous forme d’<strong>onglets</strong> ou en <strong>écran partagé</strong> (<em>split screen</em>) au sein d’un seul et même terminal et surtout de <strong>créer des sessions</strong> distinctes (qui survivent aux déconnections).</p>\n<p>Une fois <code class=\"language-text\">tmux</code> lancé, nous pouvons créer de nouveaux <em>onglets</em> ou <em>splitter</em> l’écran dans ces onglets en <em>panneaux</em>, combiné aux possibilités de créer des <em>sessions</em> les combinaisons sont nombreuses</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 850px; box-shadow: 3px 5px 4px rgba(0,0,0,.1);margin:1rem;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/970c719ee16e5ad1897acd59f5b0e31b/20c85/2020-07-12-21_55_04-behrouze%40raspi4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.093896713615024%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABUElEQVQoz3WQS7LTMBBFvf9lESdxMbFjGUhiy1b/W4YBBRug5Ec+7wVO3dKg1bd/FYuwqrj//PXbv/8IwzCE8gzD0IfQnvpTCF0f2j6cbvFhGLquO5/P1bjgAhSRr8iR2DbULLuPC36LaWGZiEfkhcXtwbqulbs5syO4lD+9YaYzkIhmMzf17b0jIjnn6hEgKnpnRmIpqZueeTFvseJnVitzzzNIgq2lfZCKrnl9b36D2VLylOYlASMp38U3kdDW+V7uGQCf55ngS4xXhDPA15RGBPlgthgtRp8mS+lRwtRECROLvM78GNsAFLGsKk9HcVczwiQIpdILfw9m5ZTifchtl7sut20+9Xa9GBEqCZP+B3evnMhEPSVDdGZjMiIDMBZSetvg35OrVp8vh/r6qb7s9vOhHut6qhtqGm4aao54ONKxedIxlZx93O+m3UjjH6k7e1y7EkDHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/970c719ee16e5ad1897acd59f5b0e31b/bc663/2020-07-12-21_55_04-behrouze%40raspi4.webp 213w,\n/static/970c719ee16e5ad1897acd59f5b0e31b/8dc4f/2020-07-12-21_55_04-behrouze%40raspi4.webp 425w,\n/static/970c719ee16e5ad1897acd59f5b0e31b/10237/2020-07-12-21_55_04-behrouze%40raspi4.webp 850w,\n/static/970c719ee16e5ad1897acd59f5b0e31b/5375e/2020-07-12-21_55_04-behrouze%40raspi4.webp 999w\"\n              sizes=\"(max-width: 850px) 100vw, 850px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/970c719ee16e5ad1897acd59f5b0e31b/3cb16/2020-07-12-21_55_04-behrouze%40raspi4.png 213w,\n/static/970c719ee16e5ad1897acd59f5b0e31b/2fbbf/2020-07-12-21_55_04-behrouze%40raspi4.png 425w,\n/static/970c719ee16e5ad1897acd59f5b0e31b/ae694/2020-07-12-21_55_04-behrouze%40raspi4.png 850w,\n/static/970c719ee16e5ad1897acd59f5b0e31b/20c85/2020-07-12-21_55_04-behrouze%40raspi4.png 999w\"\n            sizes=\"(max-width: 850px) 100vw, 850px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/970c719ee16e5ad1897acd59f5b0e31b/ae694/2020-07-12-21_55_04-behrouze%40raspi4.png\"\n            alt=\"2020 07 12 21 55 04 behrouze raspi4\"\n            title=\"2020 07 12 21 55 04 behrouze raspi4\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h1>Sessions tmux</h1>\n<p>Il faut tout d’abord lancer <code class=\"language-text\">tmux</code> (qui fait apparaitre la barre <code class=\"language-text\">tmux</code> en bas du terminal) qui va créer une session par défaut, à partir de là il est possible d’envoyer des instructions à <code class=\"language-text\">tmux</code> (via la combinaison de touches <code class=\"language-text\">CTRL + B</code>) comme ouvrir un onglet, renommer l’onglet, partager l’écran etc.</p>\n<ul>\n<li><code class=\"language-text\">tmux</code> : lance <code class=\"language-text\">tmux</code> avec une session nommée 0 par défaut</li>\n<li><code class=\"language-text\">tmux new -s nom_de_ma_session</code> : lance <code class=\"language-text\">tmux</code> avec le <strong>nom</strong> de session spécifié</li>\n<li><code class=\"language-text\">tmux a -t nom_de_ma_session</code> : permet de se <strong>raccrocher</strong> à une session existante (suite à une déconnexion par ex)</li>\n<li><code class=\"language-text\">tmux ls</code> : <strong>liste</strong> les sessions</li>\n<li><code class=\"language-text\">tmux kill-session -t nom_de_ma_session</code> : <strong>kill</strong> la session (contenant toutes les fenêtres et onglets) nommé</li>\n</ul>\n<h1>Commandes tmux</h1>\n<p>La séquence <code class=\"language-text\">CTRL + B</code> permet d’envoyer une commande à <code class=\"language-text\">tmux</code>, suivi de la touche qui donnera l’instruction.<br>\nex: <code class=\"language-text\">CTRL + B</code> puis <code class=\"language-text\">c</code> (pour créer un nouvel onglet)</p>\n<h2>Basics</h2>\n<ul>\n<li><code class=\"language-text\">c</code> : <strong>créer</strong> un nouvel onglet (<em>create</em>)</li>\n<li><code class=\"language-text\">,</code> : <strong>renommer</strong> l’onglet en cours</li>\n<li><code class=\"language-text\">x</code> : <strong>killer</strong> le panneau en cours</li>\n<li><code class=\"language-text\">d</code> : se <strong>détacher</strong> d’une session</li>\n</ul>\n<h2>Écran splitté</h2>\n<ul>\n<li><code class=\"language-text\">%</code> : split <strong>vertical</strong></li>\n<li><code class=\"language-text\">\"</code> : split <strong>horizontal</strong></li>\n<li><code class=\"language-text\">espace</code> : <strong>cycle</strong> entre des layouts différents des <strong>panneaux</strong></li>\n<li><code class=\"language-text\">ALT + flèches</code> : <strong>redimensionne</strong> le panneau en cours avec les flèches</li>\n</ul>\n<h2>Navigation</h2>\n<ul>\n<li><code class=\"language-text\">p</code> et <code class=\"language-text\">n</code> : <strong>naviguer</strong> entre les onglets (<em>previous</em> et <em>next</em>)</li>\n<li><code class=\"language-text\">w</code> : <strong>liste</strong> les fenêtres et panneaux avec un aperçu et permet de naviguer graphiquement</li>\n<li><code class=\"language-text\">o</code> : passe au <strong>panneau</strong> suivant (cycle)</li>\n<li><code class=\"language-text\">[</code> : permet de naviguer avec les <strong>flèches</strong> et Page Up/Down (et démarrer un copier/coller voir ci-dessous)</li>\n</ul>\n<h1>Trucs et astuces</h1>\n<h2>copier/coller</h2>\n<p>tmux comporte une sort de presse-papier (clipboard) qui nous permet de faire du copier/coller entre les différents onglets/panneaux, par exemple si on souhaite copier du texte ou lien depuis lynx, il suffit:</p>\n<ul>\n<li>d’être dans une session tmux</li>\n<li>se <strong>positionner</strong> dans lynx pour copier le texte voulu avec<br>\n<code class=\"language-text\">CTRL + B + [</code></li>\n<li><strong>activer la sélection</strong>:<br>\n<code class=\"language-text\">Espace</code></li>\n<li><strong>sélectionner</strong> le texte à copier avec les flèches ou PageUp/Down</li>\n<li><strong>copier</strong>:<br>\n<code class=\"language-text\">Entrée</code></li>\n<li>se positionner dans l’onglet/panneau tmux souhaité, dans un vim ou autre pour y <strong>coller</strong> le texte:<br>\n<code class=\"language-text\">CTRL + B +</code> ]</li>\n</ul>\n<p><a href=\"https://unix.stackexchange.com/questions/83811/how-to-select-a-line-of-text-in-the-archaic-terminal-browser-links\">source</a></p>\n<h1>Configuration avec tmux.conf</h1>\n<p>La configuration de tmux est définie dans le fichier <code class=\"language-text\">~/.tmux.conf</code>.</p>\n<h2>scroll avec souris</h2>\n<p>Pour pouvoir scroller et utiliser un menu contextuel avec la souris dans le terminal:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token builtin class-name\">set</span> -g mouse on\nsetw -g aggressive-resize on\n\n<span class=\"token comment\"># UI</span>\n\n<span class=\"token builtin class-name\">set</span> -g status-bg black\n<span class=\"token builtin class-name\">set</span> -g status-fg white</code></pre></div>\n<h2>conservation de l’historique</h2>\n<p>Lorsqu’on commence à utiliser tmux, on se rend vite compte que l’historique des commandes n’est pas conservée (dans le .bash_history par ex). C’est une fonctionnalité qu’il faut configurer:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token builtin class-name\">set</span> -g history-file ~/.tmux_history</code></pre></div>\n<h2>env bash</h2>\n<p>Pour obtenir votre shell bash avec toutes ses variables d’env et la coloration:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token builtin class-name\">set</span> -g default-command <span class=\"token function\">bash</span>\n<span class=\"token builtin class-name\">set</span> -g default-terminal <span class=\"token string\">\"tmux-256color\"</span></code></pre></div>\n<h1>Liens</h1>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=bTbDxaGo4tA\">Linux Leech</a></li>\n<li><a href=\"https://www.hamvocke.com/blog/a-guide-to-customizing-your-tmux-conf/\">Making tmux Pretty and Usable</a></li>\n</ul>"}},
    "staticQueryHashes": ["1026020893","28434099","3153813225"]}