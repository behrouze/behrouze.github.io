{
    "componentChunkName": "component---src-templates-wp-post-tsx",
    "path": "/wsl",
    "result": {"pageContext":{"id":"dc05d14d-f90a-5954-8fb7-7fa1d9c00b21","fileAbsolutePath":"/Users/behrouze/Sources/gatsby-blog/obsidian/Blog/wsl.md","frontmatter":{"categories":["linux"],"date":"2018-05-19","lastUpdate":"2022-01-31","tags":["bash","debian","linux","stretch","buster","bullseye","shell","tutoriel","windows","wsl"],"title":"WSL: Linux sous Windows"},"html":"<p>Lorsqu'on travaille <strong>sous Windows</strong>, il est souvent n√©cessaire, pour des raisons de compatibilit√© avec l'outillage d'un <strong>environnement de d√©veloppement orient√© JS</strong> (Node, React, Webpack etc.) ou du code r√©cup√©r√© sous Github (souvent d√©v sous MAC OS qui utilise un shell Linux), nous avons <strong>\"besoin\" d'un syst√®me Linux</strong> et si possible on aimerai pouvoir l'utiliser dans le <strong>terminal int√©gr√© de Visual Studio Code</strong> (CTRL + ALT + O) . Pour cela nous allons utiliser <strong>Linux</strong> <strong>Debian</strong> fournie par Microsoft <strong>dans Windows 10 64 bit</strong> d√©nomm√©e <strong>WSL</strong> pour <strong>Windows Subsystem for Linux</strong> (<a href=\"https://blogs.msdn.microsoft.com/wsl/2016/04/22/windows-subsystem-for-linux-overview/\">aper√ßu global de l'archi</a> et <a href=\"https://blogs.msdn.microsoft.com/wsl/2016/10/19/windows-and-ubuntu-interoperability/\">interop Win/Linux</a>).</p>\n<h2>WSL sous Windows 10</h2>\n<p><strong>Installer Linux (WSL) pour Windows 10</strong> depuis le Microsoft Store (build > 1709) et choisir sa distribution parmi celles-ci (Debian forever ü§ò) :\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 791px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7d79b9cb8ee9fa9346946379a2774a6d/cc8d6/2018-05-28-09_43_44-Microsoft-Store.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.69014084507043%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADkUlEQVQoz2WQfUwbdRjHf1Ahg0RRKG6aGBVFtyjRlSimoeGlulp6W6QNQ3ABKjPDiCGD4QbbDG2vwALbeNnoBoMyFsP2lxpgMBls2rm2jJfSZb6kVbe1vfZ613tre7SHcKbiyBK/+eR5nny/+f7zANTrxX0I6vXgqJfA/STuJzCUxP00gQcpIkSTYYZ6HJoM+D0PCcyHoj4wZ7s3fnNuxmqfsdqnzbYZq33q1uKM9a5p6XfzXef8bw+WnYjN4bY5PLHpRG7bnaPfTk6bl5333aDh/FVQcCxpjz4R0iVC8CYJkC5BEUMAtQqg9nhFW7yi9QkFnAi1btnTBj5o6R+3grqz4yC3SSDXgF0tQNby35Rt3tpkccXzOwsz3it6QayKkzaDgiPxch3IP35uzAIOGiZA/tFECBYUaePlWkGRNk6+gSahSBMHtWdI8rN3CEWZW7N2vp22q/7N3Z8BmQYUHDs/ZgaHL0xlfzkgPTKS12gU1w/mNQ7n1F3IbRiSNBgLG43y5ksVTfDeA7WZOflbs9/PLVVX1aiTpF8AyVf9398CdX3jaXs7smoML1V2v6LuyVD3vL7/zIsVXc+Vn0xVtaWrYGExnFYMp3ykfUYJv1zanPJhraCgHuTUGb4zgePG6W3lp96oMbyq7smo6s78tPe16l5haUdqyQlhSbtQpRcqtenFmmeVmnSlJrUYFir120r0T+3++uKkFWABwuXyuN0eD4ohKI6guMeH+bCAz4/7MNyL4V5/DCSWYt5HICiGBwhATAyTXbVs7+HloepT86V9d5Qnxg5AVQcL932urmn6RdriEB+9J4ObBkyVI3PVRsuvD9FoOMjQNE1TAB/tCv9wiTfPznbmNv8kNiypys5uTxZJgUqy/V2FJalkMbnsztOf1Hdf3z+6WDlktv/lDTN0gCAoigL4SHuw7xA3oP9RJzpkekv3s2ifIStFJAMSyY53oIUtZTagtDxZ/rHual6vqfDk7LwDiYQYgiRjZcRmsV3sCpkmXEvXhq91Ti0MLvxxs6On//SZwes3bptPj851fvPn5RtXpqz9k5bJZReCEQxNxaoUBRg2ElzjV3mejXD3HR4usrq+toa4XTRF8Dz/IOCjIuw6z69x7PrfUZ5fDwYZktzoUoAkAiGG4aKRIEMzQZrjosEQQ1EUx62GQ2GaIKPsSiTMEgTJrkTYlUjsUY8ENtamRf8r6jFtOv+P/gF7blcHv8+DowAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2018 05 28 09 43 44 Microsoft Store\"\n        title=\"2018 05 28 09 43 44 Microsoft Store\"\n        src=\"/static/7d79b9cb8ee9fa9346946379a2774a6d/cc8d6/2018-05-28-09_43_44-Microsoft-Store.png\"\n        srcset=\"/static/7d79b9cb8ee9fa9346946379a2774a6d/3cb16/2018-05-28-09_43_44-Microsoft-Store.png 213w,\n/static/7d79b9cb8ee9fa9346946379a2774a6d/2fbbf/2018-05-28-09_43_44-Microsoft-Store.png 425w,\n/static/7d79b9cb8ee9fa9346946379a2774a6d/cc8d6/2018-05-28-09_43_44-Microsoft-Store.png 791w\"\n        sizes=\"(max-width: 791px) 100vw, 791px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Configurer la distribution √† utiliser</h3>\n<p>Il est possible d'installer plusieurs distros Linux en mode WSL, et il faut pouvoir les g√©rer (fixer celle qu'on veut utiliser par d√©faut par ex).\nPour cela il existe: <a href=\"https://docs.microsoft.com/en-us/windows/wsl/wsl-config\">wslconfig.exe</a> (anciennement <a href=\"https://docs.microsoft.com/en-us/windows/wsl/reference\">lxrun.exe</a>) √† utiliser dans un shell DOS:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">wslconfig /l\nwslconfig /s <span class=\"token operator\">&lt;</span>DistributionName<span class=\"token operator\">></span></code></pre></div>\n<h2>WSL sous Windows 11</h2>\n<p>WSL est d√©sormais <a href=\"https://devblogs.microsoft.com/commandline/a-preview-of-wsl-in-the-microsoft-store-is-now-available/\">disponible sous Windows 11 depuis 10/2021</a></p>\n<h3>Les Pr√© requis sont:</h3>\n<ul>\n<li>disposer d'un Windows 11 build > 22000</li>\n<li>avoir le composant Windows 11 <code class=\"language-text\">Virtual Machine Platform</code> activ√©, peut se faire en tant qu'admin via la commande powershell <code class=\"language-text\">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all</code></li>\n</ul>\n<h3>Installation</h3>\n<p>L'installation se fait √† travers le <a href=\"https://aka.ms/wslstorepage\">Microsoft Store</a> pour Windows 11</p>\n<h2>Gestion de l'OS dans WSL</h2>\n<p><em>Ce qui suit concerne les OS Debian et d√©riv√©s de Debian (Ubuntu, Kali etc.)</em></p>\n<p>WSL est l'√©quivalent d'un syst√®me ind√©pendant du syst√®me hote (Windows), il faut alors g√©rer les mises √† jours de package et d'OS dans WSL.\nLa <strong>mise √† jour de packages debian</strong> s'effectue par un classique :</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> upgrade -y</code></pre></div>\n<h3>Backup/Restore</h3>\n<p>Vous pouvez backuper et restaurer votre distribution comme ceci :</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">wsl --list\n\n<span class=\"token comment\"># backup:</span>\nwsl --export debian bck_debian.tar\n\n<span class=\"token comment\"># restauration:</span>\nwsl --import <span class=\"token operator\">&lt;</span>distribution<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>dossier-cible<span class=\"token operator\">></span> bck_debian.tar</code></pre></div>\n<h3>Mise √† jours de l'OS dans WSL</h3>\n<p>La version de l'OS peut etre mise √† jour de facon assez classique √©galement :</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> upgrade -y</code></pre></div>\n<p>Editer le fichier <code class=\"language-text\">/etc/apt/sources.list</code></p>\n<ul>\n<li>pour passer de <strong>Debian 9</strong> √† <strong>Debian 10</strong>, remplacer toutes les occurence de <code class=\"language-text\">stretch</code> par <code class=\"language-text\">buster</code></li>\n<li>pour passer de <strong>Debian 10</strong> √† <strong>Debian 11</strong>, remplacer toutes les occurence de  <code class=\"language-text\">buster/updates</code> par <code class=\"language-text\">bullseye-security</code> et <code class=\"language-text\">buster</code>  par <code class=\"language-text\">bullseye</code>.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> -y full-upgrade</code></pre></div>\n<p>Et voil√† nous disposons d'une distribution Linux sous Windows ‚ö°</p>"}},
    "staticQueryHashes": ["1026020893","1333896537","28434099"]}