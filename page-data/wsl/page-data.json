{
    "componentChunkName": "component---src-templates-wp-post-tsx",
    "path": "/wsl",
    "result": {"pageContext":{"id":"a7736210-54ce-5120-ae9f-07a067527735","fileAbsolutePath":"/home/behrouze/Sources/gatsby-blog/obsidian/Blog/wsl.md","frontmatter":{"categories":["linux"],"date":"2018-05-19","lastUpdate":"2022-03-22","tags":["bash","debian","linux","stretch","buster","bullseye","shell","tutoriel","windows","wsl"],"title":"WSL: Linux sous Windows"},"html":"<p>Lorsqu'on travaille <strong>sous Windows</strong>, il est souvent n√©cessaire, pour des raisons de compatibilit√© avec l'outillage d'un <strong>environnement de d√©veloppement orient√© JS</strong> (Node, React, Webpack etc.) ou du code r√©cup√©r√© sous Github (souvent d√©v sous MAC OS qui utilise un shell Linux), nous avons <strong>\"besoin\" d'un syst√®me Linux</strong> et si possible on aimerai pouvoir l'utiliser dans le <strong>terminal int√©gr√© de Visual Studio Code</strong> (CTRL + ALT + O) . Pour cela nous allons utiliser <strong>Linux</strong> <strong>Debian</strong> fournie par Microsoft <strong>dans Windows 10 64 bit</strong> d√©nomm√©e <strong>WSL</strong> pour <strong>Windows Subsystem for Linux</strong> (<a href=\"https://blogs.msdn.microsoft.com/wsl/2016/04/22/windows-subsystem-for-linux-overview/\">aper√ßu global de l'archi</a> et <a href=\"https://blogs.msdn.microsoft.com/wsl/2016/10/19/windows-and-ubuntu-interoperability/\">interop Win/Linux</a>).</p>\n<h2>WSL sous Windows 10</h2>\n<p><strong>Installer Linux (WSL) pour Windows 10</strong> depuis le Microsoft Store (build > 1709) et choisir sa distribution parmi celles-ci (Debian forever ü§ò) :\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 791px; box-shadow: 3px 5px 4px rgba(0,0,0,.1);margin:1rem;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7d79b9cb8ee9fa9346946379a2774a6d/cc8d6/2018-05-28-09_43_44-Microsoft-Store.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.69014084507043%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADhUlEQVQoz12QfUxTZxSH3wGrg8SpdN2yLHERpyMLZgrLyPgYA1Q+WkIoIKILdjLDzEbYStikSmJvK+hUQhGpDGIBl2hclm0ZRRoymKWjhXXQxhmGJA7t123v13t729vbItylVDazX56cnJyT5/xxAOpxez0u1O3EUA+J+QjMi/tQAvNSBEZThB+SDE09CyRx1PkI96E+FAWW+fs//DJjMNvHpm2jprmxadvIXath2j5hXTDaHpj//Nu66Pj9r8dPWXQYbYs3vtePTs0/WHaC5r47oKAtqfycQKLeVPYfAolaIFEJJKoESXtC2fl4SUe8pP15sVpQ1p5Y3gEOKPtHZsDnvXqQ0xpfioCis6BYGa1FyijFsapKyj72Wvr+ne+Jt2dVxe1XgILWuFI1yG/r+9kCvtDqQd7pBLEqrgR5rlgZV4JEtXUSSpVAfD4l5/2M1K3pu0R79r6dfFCeVnYCFCEg/0xU/mpgLKOxv/DUcF7LYJb8el7LYGbTQE6zLrdZV9CiK1HcqFOcq25ofCMzX5RxILtGJvtEllj4Kcj9su8nE2jq1ScfupjWoH29TpMi694h695d37O9ruvV2svbpB3CSrWwQpVcgWwpV26rQHYcat1S/Fl8vhxkNml/nAJndOMvH+l8q+Hazo+upMi6dx2/sru+R1RzUVj9taj6wktV7cJKlVCKiKRKkVSZHD2kfqVKvVnSNnjHAjCCdDmcLqfT7cXWwV1eDPXhUTDc63uK24t7vLgnNl+HIElA6odgVyPbc8quq++0Hu61Si+MNEhk8oIPTx4/qVgoPLuUdfp+kVrRbzo2PPvxoGXhsTccZPw0TdMQEDe72PFvefPk5KVshTFLa6usvZqalF4IKnNT3xXPJFbPJx2xbj3arJk4cWuu7rrl3jLKMn6SoiCEgBjuYK7KI9+ofkX2yk17kN/2HdWmvbjvIMjJfvOd0j9eOGwHFZbNtTXIaG731AeXJqxLLi64IbvtM7YhTcA06rSPDxk6DXO6uYfGyz39ml7dpNFs1tya7bz58Pbd7wyzA2MWwz2HG6P8NIyqEAI/yzFP+BWeZ7nI8pIzElpZW111OR0QkjzPP8I9kGPXeH41zK494Xh+jWH8FBVzIaBIIuCnV8JcgPHTDB2OcEyAoSAMRyLBYBCSFBcMhQIsSVJsiGNDXPRRGwEQQnoj//ax3f8mz65i8j+hk1ZgnNKAFQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7d79b9cb8ee9fa9346946379a2774a6d/bc663/2018-05-28-09_43_44-Microsoft-Store.webp 213w,\n/static/7d79b9cb8ee9fa9346946379a2774a6d/8dc4f/2018-05-28-09_43_44-Microsoft-Store.webp 425w,\n/static/7d79b9cb8ee9fa9346946379a2774a6d/5f564/2018-05-28-09_43_44-Microsoft-Store.webp 791w\"\n              sizes=\"(max-width: 791px) 100vw, 791px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7d79b9cb8ee9fa9346946379a2774a6d/3cb16/2018-05-28-09_43_44-Microsoft-Store.png 213w,\n/static/7d79b9cb8ee9fa9346946379a2774a6d/2fbbf/2018-05-28-09_43_44-Microsoft-Store.png 425w,\n/static/7d79b9cb8ee9fa9346946379a2774a6d/cc8d6/2018-05-28-09_43_44-Microsoft-Store.png 791w\"\n            sizes=\"(max-width: 791px) 100vw, 791px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7d79b9cb8ee9fa9346946379a2774a6d/cc8d6/2018-05-28-09_43_44-Microsoft-Store.png\"\n            alt=\"2018 05 28 09 43 44 Microsoft Store\"\n            title=\"2018 05 28 09 43 44 Microsoft Store\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3>Configurer la distribution √† utiliser</h3>\n<p>Il est possible d'installer plusieurs distros Linux en mode WSL, et il faut pouvoir les g√©rer (fixer celle qu'on veut utiliser par d√©faut par ex).\nPour cela il existe: <a href=\"https://docs.microsoft.com/en-us/windows/wsl/wsl-config\">wslconfig.exe</a> (anciennement <a href=\"https://docs.microsoft.com/en-us/windows/wsl/reference\">lxrun.exe</a>) √† utiliser dans un shell DOS:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">wslconfig /l\nwslconfig /s <span class=\"token operator\">&lt;</span>DistributionName<span class=\"token operator\">></span></code></pre></div>\n<h2>WSL sous Windows 11</h2>\n<p>WSL est d√©sormais <a href=\"https://devblogs.microsoft.com/commandline/a-preview-of-wsl-in-the-microsoft-store-is-now-available/\">disponible sous Windows 11 depuis 10/2021</a></p>\n<h3>Les Pr√© requis sont:</h3>\n<ul>\n<li>disposer d'un Windows 11 build > 22000</li>\n<li>avoir le composant Windows 11 <code class=\"language-text\">Virtual Machine Platform</code> activ√©, peut se faire en tant qu'admin via la commande powershell <code class=\"language-text\">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all</code></li>\n</ul>\n<h3>Installation</h3>\n<p>L'installation se fait √† travers le <a href=\"https://aka.ms/wslstorepage\">Microsoft Store</a> pour Windows 11</p>\n<h2>Gestion de l'OS dans WSL</h2>\n<p><em>Ce qui suit concerne les OS Debian et d√©riv√©s de Debian (Ubuntu, Kali etc.)</em></p>\n<p>WSL est l'√©quivalent d'un syst√®me ind√©pendant du syst√®me hote (Windows), il faut alors g√©rer les mises √† jours de package et d'OS dans WSL.\nLa <strong>mise √† jour de packages debian</strong> s'effectue par un classique :</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> upgrade -y</code></pre></div>\n<h3>Backup/Restore</h3>\n<p>Vous pouvez backuper et restaurer votre distribution comme ceci :</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">wsl --list\n\n<span class=\"token comment\"># backup:</span>\nwsl --export debian bck_debian.tar\n\n<span class=\"token comment\"># restauration:</span>\nwsl --import <span class=\"token operator\">&lt;</span>distribution<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>dossier-cible<span class=\"token operator\">></span> bck_debian.tar</code></pre></div>\n<h3>Mise √† jours de l'OS dans WSL</h3>\n<p>La version de l'OS peut etre mise √† jour de facon assez classique en modifiant les r√©f√©rences des packages <code class=\"language-text\">apt</code> via <code class=\"language-text\">/etc/apt/sources.list.d/</code> voir <a href=\"apt.md#Mise%20%C3%A0%20jours%20de%20l&#x27;OS\">Mise √† jours de l'OS</a>.</p>"}},
    "staticQueryHashes": ["1026020893","28434099","3153813225"]}