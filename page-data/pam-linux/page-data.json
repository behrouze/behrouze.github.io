{
    "componentChunkName": "component---src-templates-wp-post-tsx",
    "path": "/pam-linux",
    "result": {"pageContext":{"id":"7e085ff7-6dc6-5889-aa45-8d3c81bfde76","fileAbsolutePath":"/home/behrouze/Sources/blog/obsidian/Blog/pam-linux.md","frontmatter":{"categories":["securite"],"date":"2020-03-22","lastUpdate":null,"tags":["linux","raspberry-pi","securite"],"title":"PAM Linux"},"html":"<p><strong>PAM</strong> <em>Pluggable Authentication Modules</em> est un <strong>mécanisme d’authentification centralisé</strong> (au niveau de l’OS) disponible sur les distributions Linux et il permet de fournir :</p>\n<ul>\n<li>une <strong>interface unifiée</strong> aux différents programmes (applications ou services) ayant besoin d’une authentification d’utilisateurs (login, ssh, postfix etc.)</li>\n<li>un système de <strong>modules</strong>, chacun spécialisé dans une méthode d’authentification</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 790px; box-shadow: 3px 5px 4px rgba(0,0,0,.1);margin:1rem;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3ec119a62ad23d06d519736b80a4834d/2e237/PAM.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.779342723004692%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVQY032OzUqFUBSFfdRex+l9hkbqzJEDMyIEoT8IgrjExXsHFh1I03M8nh+/8FBEkxYs9hqs/e0daQvSgDJgHX+0LAvGGKy1ITv3W/DWhKmUIssy4jimLEuiq/sT1c0h+Hb/gfjclmf6vg+AYRgQQgSgVpLJwZTvkLszvLO0xyOXVUWe5zRNQ/T4Irh7fuNh/87hVaEWj/cOrXWASCkZx5F5ntF6xgL66Zrp4jx82HUdRVGQJAl1XRPxj7z3rOsa/JM3bVD53dkObsA0TWnbli9mVSsLCyw20QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/3ec119a62ad23d06d519736b80a4834d/bc663/PAM.webp 213w,\n/static/3ec119a62ad23d06d519736b80a4834d/8dc4f/PAM.webp 425w,\n/static/3ec119a62ad23d06d519736b80a4834d/02aff/PAM.webp 790w\"\n              sizes=\"(max-width: 790px) 100vw, 790px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/3ec119a62ad23d06d519736b80a4834d/3cb16/PAM.png 213w,\n/static/3ec119a62ad23d06d519736b80a4834d/2fbbf/PAM.png 425w,\n/static/3ec119a62ad23d06d519736b80a4834d/2e237/PAM.png 790w\"\n            sizes=\"(max-width: 790px) 100vw, 790px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/3ec119a62ad23d06d519736b80a4834d/2e237/PAM.png\"\n            alt=\"PAM\"\n            title=\"PAM\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>schéma fonctionnement PAM</p>\n<h1>Configuration</h1>\n<p>Les <strong>fichiers de configuration de PAM</strong> se trouvent dans <code class=\"language-text\">/etc/pam.d</code> (et un fichier <code class=\"language-text\">/etc/pam.conf</code> en cas d’absence du dossier pam.d).<br>\nChaque application cliente du service PAM y a son propre fichier:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 270px; box-shadow: 3px 5px 4px rgba(0,0,0,.1);margin:1rem;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/81bf23497af79b051ccc2c1b66a2a9f0/01bf6/PAM-config.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 141.78403755868544%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAAAsTAAALEwEAmpwYAAACxElEQVRIx6WVCXPaSBCF9f9/1obdJUIHuu8LodPg4NjEASR9W8gOZQybtdmu6tKoq+vNe9PTPYKUOmRkLA8lRVcSdCFJn5P8TEn3KemqIF8cyIstUbwlL3rK8pG6HUiSkrapub9fE0YxwzAgTAMD97tN9JSxICcbcoqhJh4SWloedluaBtoVVA1kOWweXn3zg83mG9vtE+v7bxxNmM0sQsOmXDZjgAMwvCxP33Fxzc9tZCjKFpqmoKgyk8kf6KbBwEDXd/RDPyZddy5iI0NJdbD0OWVVc81+JX7UBHnu4tomhmFxv16zumupqoo8y2jq+gT6UWBBmjuYpsH0L5EoDAkDH8PQcRyH1Wr1ecAjQ9s2mYky+WJBkiY4lsnz825M6Pv+U9IFRfewLRNJVMjSbGRmOzaSJKHpOm3bnoCvFef9ZoI0d0fJX6cSiywjDANMy8bzfNI0+09G75kLomyiaSqTL38TRxG+5yLOJDRNJwoj7tqW7FigqmJZFCwWGXVZUFU1q/X6kuFRsmFoqMqLvKIoRmZFUVKVJcUyJwxjymVBHMdEYTDG8nxJWVaXgKoRkCYR7d0dt9iFZFkL8Vwb23Louv5UgPc+vF0P/alIFwxlzUORZti2i2Ua1E17dvfeV/Na/Izh7LX1dMOgbRuetk+vicOn224E/KpYRIGP7wc8P/98w+SmI0X4MlWxTY3pdDpe6HNpNwI65rF3I4o8o2nal0k33ChZMXziwMfzvNEPXXfT2DoB6k5C5Ls4toVlmnx/fGS3vx1U0N2Y0HPQDZ0kidlsHtj+2N0OqOguc1VGFCW6V7n/S7JqeOhzFT8IzsbUzQyPE7tpag6Hw2+748OAomISR+FYjI8+UNc2O716c9NHm8vjQN3v9yff7Xa/Zfg2djYcZqpFHEcYus6fkwlBECJLM+Ik+VfAX//HTY9H9ZbhP51hbIR4Gp9+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/81bf23497af79b051ccc2c1b66a2a9f0/bc663/PAM-config.webp 213w,\n/static/81bf23497af79b051ccc2c1b66a2a9f0/3e767/PAM-config.webp 270w\"\n              sizes=\"(max-width: 270px) 100vw, 270px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/81bf23497af79b051ccc2c1b66a2a9f0/3cb16/PAM-config.png 213w,\n/static/81bf23497af79b051ccc2c1b66a2a9f0/01bf6/PAM-config.png 270w\"\n            sizes=\"(max-width: 270px) 100vw, 270px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/81bf23497af79b051ccc2c1b66a2a9f0/01bf6/PAM-config.png\"\n            alt=\"PAM config\"\n            title=\"PAM config\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>liste des fichiers de configuration PAM dans /etc/pam.d</p>\n<p>Ces fichiers de configuration sont composés d’une <strong>liste de directives</strong>, chaque <strong>directive</strong> est composée de:</p>\n<ul>\n<li>une <strong>interface</strong> (il existe 4 types d’interfaces: <em>auth</em>, <em>session</em>, <em>account</em>, <em>password</em>)</li>\n<li>un <strong>flag</strong> de contrôle\n<ul>\n<li><strong>simple</strong> (<em>required</em>, <em>requisiste</em>, <em>sufficient</em>, <em>optional</em>, <em>include</em>)</li>\n<li><strong>complexe</strong> composés d’un ensemble d’attibuts/valeurs par ex: [success=ok ignore=ignore module_unknown=ignore default=bad]</li>\n</ul>\n</li>\n<li>du <strong>nom</strong> du module (pam_xxx.so)</li>\n<li>et d’un certain nombres d’<strong>arguments</strong> propre au module</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 695px; box-shadow: 3px 5px 4px rgba(0,0,0,.1);margin:1rem;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4cb4ffef5fb72d2a93dc299ff2048a75/83b75/PAM-config-app.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.474178403755868%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7klEQVQY03WQ3W6DMAyFef8n6y6p1hbSkCYQAuSPUmmtSBBnSqR1F9MsfcqRnWPZLrpXh7M+o2l7UOogWo/T6QJjDMZhAKnJm0EpzLPHtm1Ise/7H4rlccfx8wjZK8S4IYSIdV2zwVmDsixxu3E8ny/E+Fv7L4opalw9BesUevmFTs6oawohOATnqC4VDocPTFpnQ2qaCCG89Q9p8uIxLxCMo7lSCN7gSmpUVQXWMFhjoJSClBJaaxitMY5j1tM0wVqbT5NIelkWFMZotJ3IN0pGSikIIWCMZaOzLn+evc9vIuW995nUxDmHNYS88jc6Snh2m9KMxgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/4cb4ffef5fb72d2a93dc299ff2048a75/bc663/PAM-config-app.webp 213w,\n/static/4cb4ffef5fb72d2a93dc299ff2048a75/8dc4f/PAM-config-app.webp 425w,\n/static/4cb4ffef5fb72d2a93dc299ff2048a75/cc587/PAM-config-app.webp 695w\"\n              sizes=\"(max-width: 695px) 100vw, 695px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/4cb4ffef5fb72d2a93dc299ff2048a75/3cb16/PAM-config-app.png 213w,\n/static/4cb4ffef5fb72d2a93dc299ff2048a75/2fbbf/PAM-config-app.png 425w,\n/static/4cb4ffef5fb72d2a93dc299ff2048a75/83b75/PAM-config-app.png 695w\"\n            sizes=\"(max-width: 695px) 100vw, 695px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/4cb4ffef5fb72d2a93dc299ff2048a75/83b75/PAM-config-app.png\"\n            alt=\"détail fichier dans pam.d\"\n            title=\"détail fichier dans pam.d\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>extraits de fichiers de configuration PAM</p>\n<p>Ces directives sont exécutées séquentiellement (sauf en cas de flag complexe), et chacune retourne success ou failure</p>\n<h1>Bonus</h1>\n<h2>Aide man pages</h2>\n<ul>\n<li>man pam.d : aide générale sur PAM</li>\n<li>man pam_unix : nom du module souhaité sans l’extension .so (pour shared object)</li>\n<li>man pam-auth-update : outil de configuration de la configuration de PAM</li>\n</ul>\n<h2>Liste des modules PAM</h2>\n<p>voici une liste non exhaustive des modules PAM disponible dans une distribution raspbian:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">pam_access.so  \npam_chksshpwd.so  \npam_cifscreds.so  \npam_debug.so  \npam_deny.so  \npam_echo.so  \npam_env.so  \npam_exec.so  \npam_faildelay.so  \npam_filter.so  \npam_ftp.so  \npam_group.so  \npam_issue.so  \npam_keyinit.so  \npam_lastlog.so  \npam_limits.so  \npam_listfile.so  \npam_localuser.so  \npam_loginuid.so  \npam_mail.so  \npam_mkhomedir.so  \npam_motd.so  \npam_namespace.so  \npam_nologin.so  \npam_permit.so  \npam_pwhistory.so  \npam_rhosts.so  \npam_rootok.so  \npam_securetty.so  \npam_selinux.so  \npam_sepermit.so  \npam_shells.so  \npam_stress.so  \npam_succeed_if.so  \npam_systemd.so  \npam_tally2.so  \npam_tally.so  \npam_time.so  \npam_timestamp.so  \npam_tty_audit.so  \npam_umask.so  \npam_unix.so  \npam_userdb.so  \npam_warn.so  \npam_wheel.so  \npam_xauth.so</code></pre></div>"}},
    "staticQueryHashes": ["1026020893","28434099","3153813225"]}