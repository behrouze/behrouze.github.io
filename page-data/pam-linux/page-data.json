{
    "componentChunkName": "component---src-templates-wp-post-tsx",
    "path": "/pam-linux",
    "result": {"pageContext":{"id":"60efe571-9e8e-5449-becb-d0419ff4386d","fileAbsolutePath":"/home/behrouze/Sources/gatsby-blog/obsidian/Blog/pam-linux.md","frontmatter":{"categories":["securite"],"date":"2020-03-22","lastUpdate":null,"tags":["linux","raspberry-pi","securite"],"title":"PAM Linux"},"html":"<p><strong>PAM</strong> <em>Pluggable Authentication Modules</em> est un <strong>mécanisme d’authentification centralisé</strong> (au niveau de l’OS) disponible sur les distributions Linux et il permet de fournir :</p>\n<ul>\n<li>une <strong>interface unifiée</strong> aux différents programmes (applications ou services) ayant besoin d’une authentification d’utilisateurs (login, ssh, postfix etc.)</li>\n<li>un système de <strong>modules</strong>, chacun spécialisé dans une méthode d’authentification</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 790px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3ec119a62ad23d06d519736b80a4834d/2e237/PAM.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.779342723004692%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVQY032OzUqFUBSFfdRex+l9hkbqzJEDMyIEoT8IgrjExXsHFh1I03M8nh+/8FBEkxYs9hqs/e0daQvSgDJgHX+0LAvGGKy1ITv3W/DWhKmUIssy4jimLEuiq/sT1c0h+Hb/gfjclmf6vg+AYRgQQgSgVpLJwZTvkLszvLO0xyOXVUWe5zRNQ/T4Irh7fuNh/87hVaEWj/cOrXWASCkZx5F5ntF6xgL66Zrp4jx82HUdRVGQJAl1XRPxj7z3rOsa/JM3bVD53dkObsA0TWnbli9mVSsLCyw20QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PAM\"\n        title=\"PAM\"\n        src=\"/static/3ec119a62ad23d06d519736b80a4834d/2e237/PAM.png\"\n        srcset=\"/static/3ec119a62ad23d06d519736b80a4834d/3cb16/PAM.png 213w,\n/static/3ec119a62ad23d06d519736b80a4834d/2fbbf/PAM.png 425w,\n/static/3ec119a62ad23d06d519736b80a4834d/2e237/PAM.png 790w\"\n        sizes=\"(max-width: 790px) 100vw, 790px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>schéma fonctionnement PAM</p>\n<h2>Configuration</h2>\n<p>Les <strong>fichiers de configuration de PAM</strong> se trouvent dans <code class=\"language-text\">/etc/pam.d</code> (et un fichier <code class=\"language-text\">/etc/pam.conf</code> en cas d’absence du dossier pam.d).<br>\nChaque application cliente du service PAM y a son propre fichier:</p>\n<p><img src=\"images/PAM-config.png\" alt=\"\"></p>\n<p>liste des fichiers de configuration PAM dans /etc/pam.d</p>\n<p>Ces fichiers de configuration sont composés d’une <strong>liste de directives</strong>, chaque <strong>directive</strong> est composée de:</p>\n<ul>\n<li>une <strong>interface</strong> (il existe 4 types d’interfaces: <em>auth</em>, <em>session</em>, <em>account</em>, <em>password</em>)</li>\n<li>un <strong>flag</strong> de contrôle\n<ul>\n<li><strong>simple</strong> (<em>required</em>, <em>requisiste</em>, <em>sufficient</em>, <em>optional</em>, <em>include</em>)</li>\n<li><strong>complexe</strong> composés d’un ensemble d’attibuts/valeurs par ex: [success=ok ignore=ignore module_unknown=ignore default=bad]</li>\n</ul>\n</li>\n<li>du <strong>nom</strong> du module (pam_xxx.so)</li>\n<li>et d’un certain nombres d’<strong>arguments</strong> propre au module</li>\n</ul>\n<p><img src=\"images/PAM-config-app.png\" alt=\"détail fichier dans pam.d\"></p>\n<p>extraits de fichiers de configuration PAM</p>\n<p>Ces directives sont exécutées séquentiellement (sauf en cas de flag complexe), et chacune retourne success ou failure</p>\n<h2>Bonus</h2>\n<h3>Aide man pages</h3>\n<ul>\n<li>man pam.d : aide générale sur PAM</li>\n<li>man pam_unix : nom du module souhaité sans l’extension .so (pour shared object)</li>\n<li>man pam-auth-update : outil de configuration de la configuration de PAM</li>\n</ul>\n<h3>Liste des modules PAM</h3>\n<p>voici une liste non exhaustive des modules PAM disponible dans une distribution raspbian:</p>\n<p>pam_access.so<br>\npam_chksshpwd.so<br>\npam_cifscreds.so<br>\npam_debug.so<br>\npam_deny.so<br>\npam_echo.so<br>\npam_env.so<br>\npam_exec.so<br>\npam_faildelay.so<br>\npam_filter.so<br>\npam_ftp.so<br>\npam_group.so<br>\npam_issue.so<br>\npam_keyinit.so<br>\npam_lastlog.so<br>\npam_limits.so<br>\npam_listfile.so<br>\npam_localuser.so<br>\npam_loginuid.so<br>\npam_mail.so<br>\npam_mkhomedir.so<br>\npam_motd.so<br>\npam_namespace.so<br>\npam_nologin.so<br>\npam_permit.so<br>\npam_pwhistory.so<br>\npam_rhosts.so<br>\npam_rootok.so<br>\npam_securetty.so<br>\npam_selinux.so<br>\npam_sepermit.so<br>\npam_shells.so<br>\npam_stress.so<br>\npam_succeed_if.so<br>\npam_systemd.so<br>\npam_tally2.so<br>\npam_tally.so<br>\npam_time.so<br>\npam_timestamp.so<br>\npam_tty_audit.so<br>\npam_umask.so<br>\npam_unix.so<br>\npam_userdb.so<br>\npam_warn.so<br>\npam_wheel.so<br>\npam_xauth.so</p>"}},
    "staticQueryHashes": ["1026020893","28434099","3153813225"]}