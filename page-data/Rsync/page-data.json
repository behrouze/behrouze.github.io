{"componentChunkName":"component---src-templates-wp-post-tsx","path":"/Rsync","result":{"pageContext":{"id":"caafa773-b998-57ad-86d7-db1afd17e140","fileAbsolutePath":"/home/behrouze/Sources/blog/obsidian/Blog/Rsync.md","frontmatter":{"categories":["linux"],"date":"2022-03-08","lastUpdate":null,"tags":["linux","ssh","tips","cli","rsync"],"title":"Rsync"},"html":"<p>La commande <code class=\"language-text\">rsync</code> permet de synchroniser 2 dossiers en passant par une connexion <code class=\"language-text\">ssh</code> (par défaut, peut etre modifié avec l'argument <code class=\"language-text\">-e</code>). Il est de ce fait possible de configurer les options du client via le fichier <code class=\"language-text\">.ssh/config</code>.</p>\n<p>La puissance de rsync vient de sa stabilité/longévité et du nombre de ses options.</p>\n<h1>Exemple</h1>\n<p>La commande suivante copie du dossier local <code class=\"language-text\">/dossier-source</code> vers le serveur <code class=\"language-text\">backup-server</code> (port 1111 avec l'option <code class=\"language-text\">-p</code>) dans le dossier <code class=\"language-text\">/dossier-de-backup-du-serveur/</code> en utilisant les credentials du user ssh <code class=\"language-text\">ssh-backup-user</code>.\nL'option <code class=\"language-text\">--delete</code> permet de supprimer à destination les fichiers supprimés à la source.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">rsync</span> <span class=\"token parameter variable\">-avzCh</span> <span class=\"token parameter variable\">--delete</span> <span class=\"token parameter variable\">-p</span> <span class=\"token number\">1111</span> /dossier-source/ ssh-backup-user@backup-server:/dossier-de-backup-du-serveur/</code></pre></div>\n<h1>Options courrantes de rsync</h1>\n<div class=\"gatsby-highlight\" data-language=\"manpage\"><pre class=\"language-manpage\"><code class=\"language-manpage\">--rsh=COMMAND, -e\n              This option allows you to choose an alternative remote shell program to use for communication between the local and remote  copies  of  rsync. Typically, rsync is configured to use ssh by default, but you may prefer to use rsh on a local network.\n\n--archive, -a\n              This is equivalent to `-rlptgoD`.\n\t\t\t  It is a quick way of saying you want recursion and want to preserve almost everything.  \n\t\t\t  Be aware that it does not include preserving ACLs (-A), xattrs (-X), atimes (-U), crtimes (-N), nor the finding and preserving of hardlinks (-H).\n\t\t\t  \n --dry-run, -n\n              This  makes  rsync perform a trial run that doesn&#39;t make any changes (and produces mostly the same output as a real run).  It is most commonly used in combination with the --verbose, -v and/or --itemize-changes, -i options to see what an rsync command is going to do before one actually runs it.\n\n --delete\n              This  tells rsync to delete extraneous files from the receiving side (ones that aren&#39;t on the sending side), but only for the directories that are being synchronized.\n              \n --compress, -z\n              With this option, rsync compresses the file data as it is sent to the destination machine, which reduces the amount of data being transmitted\n\n   --cvs-exclude, -C\n\t\t  This is a useful shorthand for excluding a broad range of files that you often don&#39;t want to transfer between systems. \n\n--chown=USER:GROUP\n              This option forces all files to be owned by USER with group GROUP. </code></pre></div>"}},"staticQueryHashes":["1026020893","28434099","3153813225"]}