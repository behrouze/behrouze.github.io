{
    "componentChunkName": "component---src-templates-wp-page-tsx",
    "path": "/linux-systemd",
    "result": {"pageContext":{"id":"cfba85d4-e489-5d98-a93b-72c1176f80cc","fileAbsolutePath":"/home/behrouze/Sources/gatsby-blog/obsidian/Blog/linux-systemd.md","frontmatter":{"categories":null,"date":null,"lastUpdate":null,"tags":null,"title":""},"html":"<p>title: \"Linux SystemD\"\ndate: \"2019-03-25\"\ncategories:</p>\n<ul>\n<li>\"linux\"</li>\n</ul>\n<p>tags:</p>\n<ul>\n<li>\"journalctl\"</li>\n<li>\"linux\"</li>\n<li>\"service\"</li>\n<li>\"systemctl\"</li>\n<li>\"systemd\"</li>\n</ul>\n<hr>\n<h2>SystemD, les services systèmes sous Linux</h2>\n<h3><strong>Systemctl</strong></h3>\n<p>Pour gérer (start, stop, restart, status) les services sur un système Linux, nous pouvons utiliser la commande <strong>systemctl</strong> (anciennement <strong>service</strong>).<br>\nCes services sont créés/paramétrés via des fichiers de conf se trouvant dans /etc/systemd/system/<br>\npuis on les active (enable) ou désactive (disable) via la commande systemctl enable monservice.service<br>\npour un démarrage auto au boot de la machine.<br>\nIl existe ensuite un ensemble de paramètres permettant d'interagir interactivement avec nos services.<br>\nsystemctl status donne sous forme d'<strong>arborescence</strong> la liste des <strong>services démarrés</strong>, et l'état global (running : tout va bien, degraded : un ou pls services sont en carafe)</p>\n<p>systemctl status nom-du-service donne l'état du service et ses options/infos de démarrage (il est possible d'omettre l'extension .service dans le nom du service)</p>\n<p>systemctl list-unit-files liste l'<strong>ensemble des services installés</strong> et leurs <strong>status</strong> (static | enabled | disabled | masked)</p>\n<p>systemctl list-units --failed liste les <strong>services en échec</strong></p>\n<p>systemctl -p LogLevel show affiche le <strong>LogLevel de systemD</strong>, <em>info</em> par défaut (qui peut polluer les logs rsyslog)</p>\n<p>systemd-analyze set-log-level notice permet de <strong>modifier le LogLevel de systemD</strong> <strong>temporairement</strong> (jusqu'au prochain reboot)</p>\n<p>sudo systemctl daemon-reexec <strong>redémarrage du service systemctl</strong> (sans rebooter)</p>\n<h3>Journalctl</h3>\n<p>Les services gérés par le SystemD ont leurs logs accessible par défaut (souvent paramétrable) via la commande journalctl .</p>\n<p>journalctl derniers <strong>logs de SystemD</strong> utile pour voir les logs des services en échec (option -f pour follow)</p>\n<p>journalctl -u nginx.service --since today les entrées du journal d'aujourd'hui <strong>spécifique au service spécifié</strong> par l'option -u</p>\n<p>Pour vider le journal: journalctl --vacuum-time=2d ou journalctl --vacuum-size=500M</p>\n<p>voir la <a href=\"https://doc.ubuntu-fr.org/creer_un_service_avec_systemd\">doc ubuntu</a></p>"}},
    "staticQueryHashes": ["1026020893","28434099","3153813225"]}