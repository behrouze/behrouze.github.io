{
    "componentChunkName": "component---src-templates-wp-post-tsx",
    "path": "/vscode-wsl",
    "result": {"pageContext":{"id":"0867ff2e-bf45-5058-b63a-9de8e38ba6e6","fileAbsolutePath":"/Users/behrouze/Sources/gatsby-blog/obsidian/Blog/vscode-wsl.md","frontmatter":{"categories":["linux"],"date":"2018-05-19","lastUpdate":"2022-01-31","tags":["bash","debian","linux","nodejs","javascript","shell","tutoriel","vscode","windows","wsl"],"title":"VSCode WSL"},"html":"<p><em>Il peut arriver de devoir utiliser Windows</em>, m√™me pour du d√©veloppement Javascript üôÑ.\nCela peut √™tre n√©cessaire si on est <em>contraint</em> d'utiliser des outils exclusivement disponible (ou plus complet/stable) sous Windows (ex Visual Studio, Teams etc).\nOn peut √©galement pr√©f√®rer utiliser WIndows pour sa stabilit√© et le support de mat√©riel (drivers/soft de gestion non dispo sous Linux).</p>\n<h2>Pourquoi vouloir un Linux sous Windows</h2>\n<h3>D√©veloppement Javascript</h3>\n<p>L'outillage pour d√©velopper en Javascript est plus fourni sous Linux ou Mac OS, et il arrive parfois de devoir recompiler des binaires dont d√©pendent certains packages npm... et l√† sous Linux ca peut etre relou ü§î mais sous Windows üò±üò±üò± ca peut relever du parcours du combatant.</p>\n<h3>Exemple</h3>\n<p>Dernier exemple en date (j'√©tais alors sous Ubuntu) le package npm <code class=\"language-text\">bundlesize</code> n√©cessitait une compilation qui n√©cessitait make, gcc, g++ (d√©couvert bien sur apr√®s avoir d√©cortiquer les logs du <code class=\"language-text\">npm i</code>...)</p>\n<h2>WSL √† la rescousse</h2>\nDepuis 2016, Microsoft a bien compris que nous autre d√©veloppeurs allaions fuire vers Mac OS ou Linux s'il ne faisait rien pour nous retenir.\nIl est d√©sormais possible d'avoir un environnement Linux tournant sous Windows 10 sans n√©cessiter de VM grace √† <a href=\"/wsl\" title=\"WSL\">WSL</a> üéâ\n<h2>Visual Studio Code</h2>\n<h3>VSCode ‚ù§ WSL</h3>\n<p>Pour pouvoir travailler serainement dans VSCode avec l'outillage disponible sous Linux, Microsoft √† mis en place une <a href=\"https://code.visualstudio.com/docs/remote/wsl\">usine √† gaz</a> dont la compl√©xit√© nous est compl√®tement abstraite (sauf lors de l'install/configs).</p>\n<p>Les √©tapes pour coder sous Linux dans Windows, installer :</p>\n<ul>\n<li>Vscode</li>\n<li>\n<a href=\"/wsl\" title=\"environnement Linux via WSL\">environnement Linux via WSL</a>\n</li>\n<li>l'extension VSCode <a href=\"https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack\">Remote Development extension pack</a></li>\n</ul>\n<p>A partir de l√† ne pas oublier que l'environement courant est celui disponible dans la distribution WSL</p>\n<h3>Ouvrir un projet</h3>\n<p>Pour ouvrir un dossier et utiliser VSCode Linux, il faut ouvrir VSCode dans WSL en se positionnant dans le dossier souhaiter et ex√©cuter un <code class=\"language-text\">code .</code>, mais pour les lancements suivants, nous pouvons uitiliser l'historique de VSCode sans devoir passer par un terminal pour ouvrir ce meme dossier.</p>\n<h3>Attention aux filesystems</h3>\n<p>Il peut etre tentant de mettre ses sources dans un dossier disponible \"directement\" sous Windows, mais cela pose de gros probl√®me de permformances, il y a une sorte de translation pour pouvoir acc√©der depuis WSL au syst√®me de fichier de l'OS hote (Windows).\nLes build npm, les installations <code class=\"language-text\">npm i</code> etc seront d'une lenteur...</p>\nSolution: tout h√©berger dans WSL directement, et ne pas oublier de versionner avec <a href=\"/git\" title=\"git\">git</a>.\n<h3>Acc√®s aux dossier WSL</h3>\n<p>Il est parfois utile voir n√©cessaire de vouloir acc√©der aux dossiers du WSL directement depuis l'explorateur Windows, pour cela nous disposons d'un raccourci :</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">\\</span><span class=\"token punctuation\">\\</span>wsl$\n<span class=\"token comment\"># ou encore</span>\n<span class=\"token punctuation\">\\</span><span class=\"token punctuation\">\\</span>wsl$<span class=\"token punctuation\">\\</span><span class=\"token operator\">&lt;</span>nom-distribution<span class=\"token operator\">></span></code></pre></div>\n<p>et il est m√™me possible de monter ce dossier en tant que lecteur sous Windows :</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 850px; box-shadow: 3px 5px 4px rgba(0,0,0,.1);margin:1rem;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.36150234741784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABhklEQVQoz5WSW47bMAxFs/9ddB1dRIEC/RhMmgkSx4pj6/2WSKqwnRR2p/3oxf0hqANeUTp8+frtwjjUElPOKWHJWAoAAj6NiNty68P302B8sk5rY9yt15fOdR2lRK3RogVHemlbHVzFkYsYY2sNUvRixJjodQAAjPUhJiLyIRJRBagVnnCv4vnKYggzXL1XPwGwvYQIWnJndCPSSpaS20YH77WSfAWgho4dmcEptjHMHhy+3/jHYEZPx172Kk+xPXyLdYGdVwO7xZjWyXf2NprkarOl2dpUhAub+knbTNeBczu3TG4FVzjwgV29n++MEPT4ZpTexpaCG6NbIyV4yWkXu1PpwWXwbkmeDT/mPGeixQDAudBaUyMueEx5bT3hH+f+/Xi6M3a/P7zlTp5Kgc1kFEKYZWFSyJz3CxM2aG2W52uEMaiP/bZRSWmMaURKqj/hGfotyl6dP8PW/gOGHZyc3E0GgGmatNG0iU1Ef4UxeotI28neuRADEeWcV6zMnx8+wf+pX+FdL6V8ltCBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/14bbed5438a0ac8d8497d6302b7ace49/bc663/wsl-depuis-explorateur-windows.webp 213w,\n/static/14bbed5438a0ac8d8497d6302b7ace49/8dc4f/wsl-depuis-explorateur-windows.webp 425w,\n/static/14bbed5438a0ac8d8497d6302b7ace49/10237/wsl-depuis-explorateur-windows.webp 850w,\n/static/14bbed5438a0ac8d8497d6302b7ace49/10735/wsl-depuis-explorateur-windows.webp 897w\"\n              sizes=\"(max-width: 850px) 100vw, 850px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/14bbed5438a0ac8d8497d6302b7ace49/3cb16/wsl-depuis-explorateur-windows.png 213w,\n/static/14bbed5438a0ac8d8497d6302b7ace49/2fbbf/wsl-depuis-explorateur-windows.png 425w,\n/static/14bbed5438a0ac8d8497d6302b7ace49/ae694/wsl-depuis-explorateur-windows.png 850w,\n/static/14bbed5438a0ac8d8497d6302b7ace49/3a737/wsl-depuis-explorateur-windows.png 897w\"\n            sizes=\"(max-width: 850px) 100vw, 850px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/14bbed5438a0ac8d8497d6302b7ace49/ae694/wsl-depuis-explorateur-windows.png\"\n            alt=\"wsl depuis explorateur windows\"\n            title=\"wsl depuis explorateur windows\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h2>Debug</h2>\n<h3>Debugger une application <a href=\"https://blogs.msdn.microsoft.com/commandline/2017/10/27/running-node-js-on-wsl-from-visual-studio-code/\">Nodejs</a> lanc√©e √† travers WSL</h3>\n<p>Il suffit de rajouter l'attribut¬†\"useWSL\": true¬† dans le launch.json</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n\t<span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"request\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"launch\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Launch Program\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"program\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${workspaceFolder}/bin/www\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"useWSL\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Misc</h2>\n<h3>Pi√®ges √† √©viter</h3>\nSi aucun terminal ne s'ouvre dans VSCode, le petit pi√®ge √† √©viter c'est que VsCode doit √™tre install√© en version 64 bits.\nJ'aurai pu √©viter de perdre du temps si je l'avais <a href=\"/chocolatey\" title=\"install√© avec Chocolatey\">install√© avec Chocolatey</a>...\n<p><strong>WSL peut planter au d√©marrage</strong> de la machine avec une erreur Error: 0x800703fa¬† il suffit de rebooter ou de relancer le service qui g√®re le l'instance du sous-syst√®me Windows pour Linux:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">sc queryex LxssManager\nsc start LxssManager</code></pre></div>\n<h3>Juste un shell Linux dans VSCode</h3>\n<p>Une autre configuration, moins int√©gr√©e, consiste pour ceux qui souhaitent juste disposer d'un shell Linux depuis le <strong>dans le terminal int√©gr√© de VSCode</strong> de configurer wsl comme shell de VSCode dans les <strong>User Settings</strong> (<code class=\"language-text\">CTRL + , </code>) le chemin vers le <strong>binaire bash</strong> de WSL:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"terminal.integrated.shell.windows\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"C:\\\\WINDOWS\\\\System32\\\\wsl.exe\"</span></code></pre></div>\n<p><a href=\"https://code.visualstudio.com/docs/editor/integrated-terminal\">doc MS</a> √† propos du Terminal Int√©gr√© de VSCode</p>"}},
    "staticQueryHashes": ["1026020893","28434099","3153813225"]}