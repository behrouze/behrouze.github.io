{
    "componentChunkName": "component---src-templates-wp-post-tsx",
    "path": "/ssh-tips-tricks",
    "result": {"pageContext":{"id":"dc6ac928-2e52-5a91-b38f-6891dbad3966","fileAbsolutePath":"/home/behrouze/Sources/gatsby-blog/obsidian/Blog/ssh-tips-tricks.md","frontmatter":{"categories":["linux"],"date":"2018-08-26","lastUpdate":null,"tags":["admin-linux","linux","memo","ssh","tips"],"title":"SSH tips & tricks"},"html":"<h2>scp - copie de fichiers via SSH</h2>\n<p>Il est possible d'utiliser une <strong>connexion SSH</strong> pour copier un fichier entre 2 machines du réseau de façon sécurisée. Utiliser pour cela <strong>SCP</strong> <strong>sous Linux</strong> et son homologue pour <strong>Windows <a href=\"https://winscp.net/eng/docs/lang:fr\">WinScp</a></strong> ou <strong>PSCP.exe</strong> en ligne de commande (de la <a href=\"https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html\">suite Putty</a>).</p>\n<p>Pour copier d'un serveur <strong>SSH distant vers</strong> un répertoire <strong>local</strong> :</p>\n<p>scp username_distant@nom_du_serveur_ssh_distant:/dossier_distant/fichier_distant /dossier_distant/tmp/</p>\n<p>et dans l'autre sens, <strong>local vers serveur SSH distant</strong> :</p>\n<p>scp /dossier_local/fichier_local username_distant@nom_du_serveur_ssh_distant:/dossier_distant/</p>\n<h2>ssh-keygen</h2>\n<h3>Générer une pair de clé publique/privée SSH</h3>\n<p>Pour bénéficier d'une authentification forte (<a href=\"https://blog.g3rt.nl/upgrade-your-ssh-keys.html\">lire ce post</a>) :</p>\n<p>ssh-keygen -o -a 100 -t ed25519</p>\n<p>Il peut alors etre utile de modifier son fichier ~/.ssh/config  (man ssh_config ) pour y spécifier la nouvelle clé par défaut avec la directive:</p>\n<p>IdentityFile ~/.ssh/id_ed25519</p>\n<h3>Modifier la passphrase SSH</h3>\n<p>Pour <strong>modifier</strong> ou <strong>supprimer</strong> la passphrase lié à la clé SSH privée (celle qui est en locale et qui nous sert à s'authentifier sur les serveur distant):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ssh-keygen -p [-P old_passphrase] [-N new_passphrase] [-f keyfile]</code></pre></div>\n<h2>ssh-copy-id - diffusion de sa clé publique via SSH</h2>\n<p>Dans le cas particulier de la <strong>copie de notre clé publique ssh</strong> sur une autre machine, une commande forte utile est ssh-copy-id  (demande le password):</p>\n<p>ssh-copy-id username@destination</p>\n<h3>Exécution distant parallélisée</h3>\n<ul>\n<li><a href=\"https://github.com/robinbowes/pssh\">parallel-ssh</a> (Parallel versions of SSH-based tools): regroupe un ensemble de commandes (pssh, pscp, prsync, pnuke, and pslurp) permettant d'exécuter les même commandes sur plusieurs machines distantes.</li>\n<li><a href=\"http://docs.fabfile.org\">Fabric</a> (Simple Pythonic remote deployment tool): outil contrôlable via un script python (article sur l'<a href=\"https://gist.github.com/DavidWittman/1886632#using-fabric\">usage</a> puis sur <a href=\"https://www.linuxjournal.com/content/fabric-system-administrators-best-friend\">Linuxjournal</a> et <a href=\"https://insights.sei.cmu.edu/devops/2015/03/devops-technologies-fabric-or-ansible.html\">un autre</a> sur plus général sur les outils devops)</li>\n</ul>\n<h2>Liens</h2>\n<p><a href=\"https://linux-audit.com/audit-and-harden-your-ssh-configuration/\">Renforcer la sécurité de son serveur SSHD</a></p>\n<p>Proxyfier SSH avec <a href=\"http://www.rutschle.net/tech/sslh/README.html\">SSLH</a> ou <a href=\"https://www.squins.com/knowledge/squid-http-https-ssh-proxy/\">Squid</a></p>"}},
    "staticQueryHashes": ["1026020893","1333896537","28434099"]}