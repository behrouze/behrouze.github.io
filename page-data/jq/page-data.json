{"componentChunkName":"component---src-templates-wp-post-tsx","path":"/jq","result":{"pageContext":{"id":"4dae6662-3af6-5d08-8b11-95c2116016d8","fileAbsolutePath":"/home/behrouze/Sources/blog/obsidian/Blog/jq.md","frontmatter":{"categories":["devops"],"date":"2022-11-25","lastUpdate":"2022-11-25","tags":["linux","jq","json","docker","syntaxe"],"title":"jq - JSON Query"},"html":"<p>jq est d'apr√®s <a href=\"https://stedolan.github.io/jq/\">son cr√©ateur</a> un <em>lightweight and flexible command-line JSON processor</em> soit en bon Fan√ßais, un <em>outil de traitement de JSON en ligne de commande l√©ger et flexible</em>.</p>\n<p><code class=\"language-text\">jq</code> permet de d√©couper, filtrer et modifier √† souhait de la donn√©e au format JSON sous Linux.</p>\n<p>Par exemple pour afficher le JSON avec reconnaissance syntaxique :</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">docker</span> inspect mon_conteneur_docker <span class=\"token operator\">|</span> jq <span class=\"token parameter variable\">-C</span> <span class=\"token operator\">|</span> <span class=\"token function\">less</span></code></pre></div>\n<p>et pour extraire la cl√© <em>Mounts</em> de ce JSON</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">docker</span> inspect nginx<span class=\"token operator\">|</span>jq <span class=\"token string\">'.[0].Mounts'</span>\n<span class=\"token comment\"># .[0] car le JSON g√©n√©r√© ici est un tableau d'1 √©l√©ment (Array Index)</span>\n<span class=\"token comment\"># .Mounts = cl√© dans l'objet JSON</span>\n\n<span class=\"token comment\"># √©quivalent avec [] qui retourne tous les index (Array/Object Value Iterator)</span>\n<span class=\"token function\">docker</span> inspect nginx<span class=\"token operator\">|</span>jq <span class=\"token string\">'.[].Mounts'</span> \n\n<span class=\"token comment\"># √©quivalent (Generic Object Index)</span>\n<span class=\"token function\">docker</span> inspect nginx<span class=\"token operator\">|</span>jq <span class=\"token string\">'.[0][\"Mounts\"]'</span> \n\n<span class=\"token comment\"># pour r√©cup√©rer plusieurs cl√©s</span>\n<span class=\"token function\">docker</span> inspect nginx<span class=\"token operator\">|</span>jq <span class=\"token string\">'.[0].NetworkSettings, .[0].Mounts'</span></code></pre></div>\n<p>Voir le <a href=\"https://stedolan.github.io/jq/manual/\">manuel officiel de jq</a> pour plus d'infos</p>\n<p>Pour info on peut obtenir une s√©lection de cl√© de la commande <code class=\"language-text\">docker inspect</code> (<a href=\"https://docs.docker.com/engine/reference/commandline/inspect/\">doc</a>) et donc avoir le meme r√©sultat que la 1√®re commande  ci-dessus :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker inspect --format='{{json .Mounts}}' nginx | jq\n# est √©quivalent √† \ndocker inspect nginx|jq '.[0].Mounts'</code></pre></div>\n<h2>Le myst√®re de la signification de jq</h2>\n<p>D'apr√®s ce <a href=\"https://stackoverflow.com/questions/56111140/what-does-jq-stand-for\">post sur SO</a> (on ne trouve pas la r√©ponse sur le site officiel) l'auteur a choisi ce nom simplement parce que la combinaison de lettres <code class=\"language-text\">jq</code> est court et facile √† tapper au clavier  üòÇü•≥ü§£ Mythe ou r√©alit√© ? en tout cas c'est dr√¥le !</p>\n<blockquote>\n<p>... although 'jq' doesn't specifically \"mean\" anything. Asked the utility's author, which provided this interesting bit of trivia: \"Honestly, the name was chosen to be short and easy to type on qwerty, not to have any particular meaning.\"</p>\n</blockquote>"}},"staticQueryHashes":["1026020893","2750442709","28434099"]}